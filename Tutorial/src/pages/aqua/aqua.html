<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Aqua</ion-title>
  </ion-navbar>
</ion-header>


<ion-content padding>

	<h3>Things that are the color AQUA</h3>

	<ul>
		<li>Swimming Pools</li>
		<li>Zac Effron's Eyes </li>
		<li> Tiffany's jewelry boxes </li>
	</ul>

    <button onclick="writeGroupData(2915419, 1, 10,1)">test it out</button>
    <button onclick="createGroup(120)">new group</button>
    <button onclick="createU(3526, 'Mia')">creatUse</button>
    <button onclick="addToGroup(4915, 'anneb1397')">add</button>

</ion-content>

<script>
    // JavaScript source code

    var talking;
    var userId;

    var database = firebase.database();
    var groupRef = database.ref('groups');
    var userRef = database.ref('Users');

    /**
    Should create a random group id and then call writeGroupData
    */
    function createGroup(length) {
        var newId = groupRef.push();
        writeGroupData(newId, 1, length, length);
    }


    function createU(uId, nm) {

        database.ref('Users/' + uId).set({ name: nm });
    }
    
    /**
    Should write a new group to the firebase database
    */
    function writeGroupData(groupId, gSize, mLength, gTalkTime) {
        firebase.database().ref('Groups/' + groupId).set({
            groupSize: gSize,
            meetingLength: mLength,
            goalTalkTime: gTalkTime
        });
    }
    /**
    Should add to the correct group's groupSize and modify goalTalkTime
    */
    function addToGroup(gId, userId) {
        database.ref('groups/' + gId).set({ groupSize: database.ref('groups/' + gId + '/groupSize') + 1, goalTalkTime: database.ref('groups/' + gId + '/goalTalkTime') / database.ref('groups/' + gId + '/groupSize') });
        database.ref('Users/' + userId).set({ groupId: gId });

    }
</script>
